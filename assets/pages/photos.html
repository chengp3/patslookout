<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="/assets/css/ostyles.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Cedarville+Cursive&display=swap" rel="stylesheet">
        <style>
            #title {
                font-family: 'Cedarville Cursive', serif;
            }
        </style>
        <link href="/node_modules/lightbox2/dist/css/lightbox.min.css" rel="stylesheet" />
    </head>
    <body class="flex flex-col items-center w-full mx-auto min-h-screen">
        <div id="header" class="flex justify-center mt-10 pb-10 border-b-2 w-7/12">
            <div class="flex flex-col justify-center items-center mr-16 custom-font text-5xl md:text-9xl">
                <a href="/index.html">the lookout</a>
            </div>
            <div class="flex items-center" id="navbar-collapse">
                <ul class="flex flex-col list-none">
                    <li class="nav-item">
                        <a href="/index.html" class="py-3 flex items-center text-xs uppercase font-bold leading-snug hover:opacity-75 md:text-xl">Home</a>
                    </li>
                    <li class="nav-item">
                        <a href="/assets/pages/tech.html" class="py-3 flex items-center text-xs uppercase font-bold leading-snug hover:opacity-75 md:text-xl">Tech</a>
                    </li>
                    <li class="nav-item">
                        <a href="/assets/pages/photos.html" class="py-3 flex items-center text-xs uppercase font-bold leading-snug hover:opacity-75 md:text-xl">Photos</a>
                    </li>
                    <li class="nav-item">
                        <a href="/assets/pages/climbing.html" class="py-3 flex items-center text-xs uppercase font-bold leading-snug hover:opacity-75 md:text-xl">Climbing</a>
                    </li>
                </ul>
            </div>            
        </div>
        <main id="swup" class="flex flex-col items-center transition-swipe w-8/12 mt-10">
            <div id="content" class="flex flex-col w-full saturate-100 drop-shadow-2xl transition-swipe">
                <div class="w-full flex flex-col items-center m-6">
                    <div id="title" class="text-7xl">Postcards</div>
                    <div class="text-xl">(from my life)</div>
                </div>
                <div id="gallery" class="grid grid-cols-1 md:grid-cols-3"></div>
            </div>
            <div class="my-16" id="footer">
                <nav class="social-media-navbar"><ul>
                    <li><a href="https://github.com/chengp3" target="_blank" class="flex flex-col items-center"><i class="fab fa-github mx-8"></i><span class="text-xs mt-2">git</span></a></li> 
                    <li><a href="https://www.instagram.com/alpinewizard" target="_blank" class="flex flex-col items-center"><i class="fab fa-instagram mx-8"></i><span class="text-xs mt-2">insta</span></a></li> 
                    <li><a href="https://www.linkedin.com/in/swepat" target="_blank" class="flex flex-col items-center"><i class="fab fa-linkedin mx-8"></i><span class="text-xs mt-2">linkedin</span></a></li> 
                </ul></nav>
            </div>
        </main>
        <script type="text/javascript" src="/node_modules/lightbox2/dist/js/lightbox-plus-jquery.min.js"></script>
    </body>
    <script src="/assets/swup.js" type="module"></script>
    <script>
        function constructGallery(data) {
            const gallery = document.getElementById('gallery')
            const thumbnails = 'https://patslookout.s3.us-west-2.amazonaws.com/gallery/thumbs/';
            const fullsize = 'https://patslookout.s3.us-west-2.amazonaws.com/gallery/fullsize/';
          
            data.forEach(image => {
                const filename = image.title;
                const thumbUrl = thumbnails + filename
                const fullUrl = fullsize + filename

                const anchorElement = document.createElement('a');
                anchorElement.href = fullUrl;
                anchorElement.setAttribute('data-lightbox', 'gallery');
                anchorElement.setAttribute('data-title', image.description);
                anchorElement.classList.add('m-4')
                const thumbnailElement = document.createElement('img');
                thumbnailElement.src = thumbUrl;
                thumbnailElement.classList.add('p-2', 'grayscale', 'hover:grayscale-0', 'hover:scale-110', 'transition', 'border', 'border-black')
                // for some reason tailwind is adding its own border color after rebuild :(

                anchorElement.appendChild(thumbnailElement);
                gallery.appendChild(anchorElement);
            });
        }

        fetch('photos.json')
            .then(response=>{
                if (!response.ok) {
                    throw new Error('Network response was not ok: ' + response.statusText);
                }
                return response.json();
            })
            .then(data=>constructGallery(data))
            .catch(error => console.error('Error fetching file', error.message))

    </script>
</html>
